--- /home/jf/repos/lua/luatex_api_all/library/luatex/unicode.lua_upstream.lua	2023-04-14 21:14:50.962848405 +0200
+++ /home/jf/repos/lua/luatex_api_all/library/luatex/unicode.lua	2023-04-14 20:48:09.777665923 +0200
@@ -1,3 +1,15 @@
+_N._4_3_lua_modules = "page 67"
+
+---
+---`slnunicode`, from the `selene` libraries, http://luaforge.net/projects/sln. This library has been slightly extended
+---so that the `unicode.utf8.*` functions also accept the first 256 values
+---of plane 18. This is the range *LuaTeX* uses for raw binary output, as
+---explained above. We have no plans to provide more like this because you can
+---basically do all that you want in *Lua*.
+---
+---Changes to the upstream project: global unicode table
+
+---
 ---@meta
 ---The definitions are developed in this repository: https://github.com/LuaCATS/slnunicode
 
@@ -19,12 +31,8 @@
 ---
 ---Grapheme takes care of grapheme clusters, which are characters followed by
 ---"grapheme extension" characters (Mn+Me) like combining diacritical marks.
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
-local unicode = {}
+unicode = {}
 
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 unicode.ascii = {}
 
 ---
@@ -35,8 +43,6 @@
 ---@param j? integer
 ---
 ---@return integer ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.byte(s, i, j) end
 
 ---
@@ -46,16 +52,12 @@
 ---@param ... integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.char(byte, ...) end
 
 ---
 ---Returns a string containing a binary representation (a binary chunk) of the given function.
 ---
 ---@param f fun(...: any):...unknown
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.dump(f) end
 
 ---
@@ -67,8 +69,6 @@
 ---
 ---@return integer start
 ---@return integer end
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.find(s, pattern, init) end
 
 ---
@@ -78,8 +78,6 @@
 ---@param ... any
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.format(s, ...) end
 
 ---
@@ -89,8 +87,6 @@
 ---@param pattern string
 ---
 ---@return fun():string, ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.gmatch(s, pattern) end
 
 ---
@@ -103,8 +99,6 @@
 ---s, pattern, repl, n
 ---@return string
 ---@return integer count
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.gsub(s, pattern, repl, n) end
 
 ---
@@ -113,8 +107,6 @@
 ---@param s string
 ---
 ---@return integer
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.len(s) end
 
 ---
@@ -123,8 +115,6 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.lower(s) end
 
 ---
@@ -135,8 +125,6 @@
 ---@param init? integer
 ---
 ---@return any ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.match(s, pattern, init) end
 
 ---
@@ -146,8 +134,6 @@
 ---@param n integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.rep(s, n) end
 
 ---
@@ -156,8 +142,6 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.reverse(s) end
 
 ---
@@ -168,8 +152,6 @@
 ---@param j? integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.sub(s, i, j) end
 
 ---
@@ -178,12 +160,8 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.ascii.upper(s) end
 
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 unicode.latin1 = {}
 
 ---
@@ -194,8 +172,6 @@
 ---@param j? integer
 ---
 ---@return integer ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.byte(s, i, j) end
 
 ---
@@ -205,16 +181,12 @@
 ---@param ... integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.char(byte, ...) end
 
 ---
 ---Returns a string containing a binary representation (a binary chunk) of the given function.
 ---
 ---@param f fun(...: any):...unknown
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.dump(f) end
 
 ---
@@ -226,8 +198,6 @@
 ---
 ---@return integer start
 ---@return integer end
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.find(s, pattern, init) end
 
 ---
@@ -237,8 +207,6 @@
 ---@param ... any
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.format(s, ...) end
 
 ---
@@ -248,8 +216,6 @@
 ---@param pattern string
 ---
 ---@return fun():string, ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.gmatch(s, pattern) end
 
 ---
@@ -262,8 +228,6 @@
 ---
 ---@return string
 ---@return integer count
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.gsub(s, pattern, repl, n) end
 
 ---
@@ -272,8 +236,6 @@
 ---@param s string
 ---
 ---@return integer
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.len(s) end
 
 ---
@@ -282,8 +244,6 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.lower(s) end
 
 ---
@@ -294,8 +254,6 @@
 ---@param init? integer
 ---
 ---@return any ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.match(s, pattern, init) end
 
 ---
@@ -305,8 +263,6 @@
 ---@param n integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.rep(s, n) end
 
 ---
@@ -315,8 +271,6 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.reverse(s) end
 
 ---
@@ -327,8 +281,6 @@
 ---@param j? integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.sub(s, i, j) end
 
 ---
@@ -337,12 +289,8 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.latin1.upper(s) end
 
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 unicode.grapheme = {}
 
 ---
@@ -353,8 +301,6 @@
 ---@param j? integer
 ---
 ---@return integer ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.byte(s, i, j) end
 
 ---
@@ -364,16 +310,12 @@
 ---@param ... integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.char(byte, ...) end
 
 ---
 ---Returns a string containing a binary representation (a binary chunk) of the given function.
 ---
 ---@param f fun(...: any):...unknown
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.dump(f) end
 
 ---
@@ -385,8 +327,6 @@
 ---
 ---@return integer start
 ---@return integer end
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.find(s, pattern, init) end
 
 ---
@@ -396,8 +336,6 @@
 ---@param ... any
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.format(s, ...) end
 
 ---
@@ -407,8 +345,6 @@
 ---@param pattern string
 ---
 ---@return fun():string, ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.gmatch(s, pattern) end
 
 ---
@@ -421,8 +357,6 @@
 ---
 ---@return string
 ---@return integer count
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.gsub(s, pattern, repl, n) end
 
 ---
@@ -431,8 +365,6 @@
 ---@param s string
 ---
 ---@return integer
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.len(s) end
 
 ---
@@ -441,9 +373,8 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.lower(s) end
+
 ---
 ---Looks for the first match of pattern in the string.
 ---
@@ -452,8 +383,6 @@
 ---@param init? integer
 ---
 ---@return any ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.match(s, pattern, init) end
 
 ---
@@ -463,8 +392,6 @@
 ---@param n integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.rep(s, n) end
 
 ---
@@ -473,8 +400,6 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.reverse(s) end
 
 ---
@@ -485,8 +410,6 @@
 ---@param j? integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.sub(s, i, j) end
 
 ---
@@ -495,12 +418,8 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.grapheme.upper(s) end
 
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 unicode.utf8 = {}
 
 ---
@@ -511,8 +430,6 @@
 ---@param j? integer
 ---
 ---@return integer ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.byte(s, i, j) end
 
 ---
@@ -522,16 +439,12 @@
 ---@param ... integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.char(byte, ...) end
 
 ---
 ---Returns a string containing a binary representation (a binary chunk) of the given function.
 ---
 ---@param f fun(...: any):...unknown
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.dump(f) end
 
 ---
@@ -543,8 +456,6 @@
 ---
 ---@return integer start
 ---@return integer end
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.find(s, pattern, init) end
 
 ---
@@ -554,8 +465,6 @@
 ---@param ... any
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.format(s, ...) end
 
 ---
@@ -565,8 +474,6 @@
 ---@param pattern string
 ---
 ---@return fun():string, ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.gmatch(s, pattern) end
 
 ---
@@ -579,8 +486,6 @@
 ---
 ---@return string
 ---@return integer count
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.gsub(s, pattern, repl, n) end
 
 ---
@@ -589,8 +494,6 @@
 ---@param s string
 ---
 ---@return integer
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.len(s) end
 
 ---
@@ -599,8 +502,6 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.lower(s) end
 
 ---
@@ -611,8 +512,6 @@
 ---@param init? integer
 ---
 ---@return any ...
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.match(s, pattern, init) end
 
 ---
@@ -622,8 +521,6 @@
 ---@param n integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.rep(s, n) end
 
 ---
@@ -632,8 +529,6 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.reverse(s) end
 
 ---
@@ -644,8 +539,6 @@
 ---@param j? integer
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.sub(s, i, j) end
 
 ---
@@ -654,8 +547,6 @@
 ---@param s string
 ---
 ---@return string
----
----ğŸ˜± [Types](https://github.com/LuaCATS/slnunicode/blob/main/library/unicode.lua) incomplete or incorrect? ğŸ™ [Please contribute!](https://github.com/LuaCATS/slnunicode/pulls)
 function unicode.utf8.upper(s) end
 
 return unicode
